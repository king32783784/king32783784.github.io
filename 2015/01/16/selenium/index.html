<!DOCTYPE html>
<html lang="link">
<head>

        <title>selenium-专题4</title>
        <meta charset="utf-8" />
        <link href="http://king32783784.github.io/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Hi | World Full Atom Feed" />
        <link href="http://king32783784.github.io/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Hi | World Full RSS Feed" />


        <!-- Mobile viewport optimized: j.mp/bplateviewport -->
        <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" type="text/css" href="../../../../theme/gumby.css" />
        <link rel="stylesheet" type="text/css" href="../../../../theme/style.css" />
        <link rel="stylesheet" type="text/css" href="../../../../theme/pygment.css" />
        <link rel="stylesheet" type="text/css" href="../../../../theme/SentyZHAO/SentyZHAO.css" />

        <script src="../../../../theme/js/libs/jquery-1.9.1.min.js"></script>
        <script src="../../../../theme/js/libs/modernizr-2.6.2.min.js"></script>
</head>

<body id="index" class="home">
    <div class="container">

        <div class="row">

          <header id="banner" class="body">
                  <h1 style='font-family: "SentyZHAO";'><a href="../../../..">Hi | World <strong></strong></a></h1>
          </header><!-- /#banner -->

            <div id="navigation" class="navbar row">
              <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"><i class="icon-menu"></i></a>

              <ul class="columns" style='font-family: "SentyZHAO";'>
                <li><a href="../../../..">主 页</a></li>

                <li><a href="../../../../pages/tech-share.html">归档</a></li>
                <li><a href="../../../../pages/opensource.html">开源项目</a></li>
                <li><a href="../../../../pages/links.html">链接</a></li>
                <li><a href="../../../../pages/Reference material.html">参考资料</a></li>
                <li><a href="../../../../pages/todo list.html">Todo List</a></li>
                <li><a href="../../../../pages/tools.html">工具集</a></li>
                <li class="active"><a href="../../../../pages/aboutme.html">关于我</a></li>

              </ul>
            </div>

<section id="content" class="body">
   <div class="row">
        <div class="columns">
            <header>
              <h2 class="entry-title">
                <a href="../../../../2015/01/16/selenium/" rel="bookmark" title="Permalink to selenium-专题4">selenium-专题4</a></h2>
           Translations: 
<a href="../../../../2015/01/21/selenium/">link</a>
<a href="../../../../2015/01/20/selenium/">link</a>
<a href="../../../../2015/01/14/selenium/">link</a>
<a href="../../../../2015/01/19/selenium/">link</a>
<a href="../../../../2015/01/23/selenium/">link</a>
<a href="../../../../2015/01/24/selenium/">link</a>
<a href="../../../../2015/01/18/selenium/">link</a>
<a href="../../../../2015/01/15/selenium/">link</a>
<a href="../../../../2015/01/17/selenium/">link</a>
<a href="../../../../2015/01/22/selenium/">link</a>
<a href="../../../../2015/01/13/selenium/">link</a>
<a href="../../../../2015/01/25/selenium/">link</a>

            </header>
            <footer class="post-info">
              <abbr class="published" title="2015-01-16T00:00:00+08:00">
                五 16 一月 2015
              </abbr>
              <address class="vcard author">
                By <a class="url fn" href="../../../../author/penglee.html">peng.lee</a>
              </address>
            </footer><!-- /.post-info -->
            <div class="entry-content">
              </head><body><h3 id="yuan-su-ding-wei">元素定位</h3>
<p>提供很多种方式去定位页面的元素。可以从中选择一个适合的用于测试。Selenium 提供了以下方法用于定位页面元素：</p>
<div class="highlight"><pre><span></span>*find_element_by_id
*find_element_by_name
*find_element_by_xpath
*find_element_by_link_text
*find_element_by_partial_link_text
*find_element_by_tag_name
*find_element_by_class_name
*find_element_By_css_selector
</pre></div>
<p>要找到多个元素（这些方法将返回一个列表）：</p>
<div class="highlight"><pre><span></span>*find_elements_by_name
*find_elements_by_xpath
*find_elements_by_link_text
*find_elements_by_partial_link_text
*find_elements_by_tag_name
*find_elements_by_class_name
*find_elements_by_css_selector
</pre></div>
<p>除了上面列出的公共方法外，还有两个用于页面对象定位器的私有方法。这两个私有方法是：find_element 和　find_elements.
用法例子：</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">selenium.webdriver.common.by</span> <span class="kn">import</span> <span class="n">By</span>

<span class="n">driver</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s1">'//button[test()="Some text"]'</span><span class="p">)</span>
<span class="n">driver</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s1">'//button'</span><span class="p">)</span>
</pre></div>
<p>这些都是类可用的属性：</p>
<div class="highlight"><pre><span></span>ID = "id"
XPATH = "xpath"
LINK_TEXT = "link text"
PARTIAL_LINK_TEXT = "partial link text"
NAME = "name"
TAG_NAME = "tag name"
CLASS_NAME = "class name"
CSS_SELECTOR = "css selector"
</pre></div>
<h4 id="shi-yong-idding-wei">使用ID定位</h4>
<p>当你知道元素的id属性时，可以用ＩＤ定位。这种方式，将返回第一个和ＩＤ属性匹配的元素。如果没有匹配的元素，将会触发NoSuchElementException异常.
例如，参考这个页面的源代码：</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;html&gt;</span>
 <span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"loginForm"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"username"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">type=</span><span class="s">"password"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"continue"</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Login"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
 <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;html&gt;</span>
</pre></div>
<p>可以通过下面方式定位form元素：
　
    login_form = driver.find_element_by_id('loginForm')</p>
<h4 id="shi-yong-ming-cheng-ding-wei">使用名称定位</h4>
<p>当知道元素的名称属性时，可以通过名称的方式定位。这种方式，将返回第一个和name属性匹配的元素。如果没有匹配的元素，将触发NoSuchElementException异常。
例如，参考页源码：</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;html&gt;</span>
 <span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;form</span> <span class="na">id =</span> <span class="s">"loginForm"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"username"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">type=</span><span class="s">"password"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"continue"</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Login"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"continue"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">value=</span><span class="s">"Clear"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
 <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;html&gt;</span>
</pre></div>
<p>username和password元素可以通过下面的方式定位：</p>
<div class="highlight"><pre><span></span>username = driver.find_element_by_name('username')
password = driver.find_element_by_name('password')
</pre></div>
<p>这样在“Clear"按钮之前，“login”按钮将先被获取：</p>
<div class="highlight"><pre><span></span>continue = driver.find_element_by_name('continue')
</pre></div>
<h4 id="shi-yong-xpathding-wei">使用Xpath定位</h4>
<p>Xpath是ＸＭＬ文档中定于节点的语言。ＨTML可以看做是XML的一种实现，Selenium可以通过这一强大的语言去定位web应用的元素。XPath定位方法超过了id和name定位方法，它可以实现一些更多的定位可能，比如定位页面中第三个复选框。</p>
<p>使用Xpath定位一个很大原因是需要定位一个没有合适的is/name的元素。XPath可以定位相对路径的元素，还可以定位有id/name的元素。Xpath还可以用于指定通过id/name定位的元素。</p>
<p>XPaths可以获取所有root(html)中的元素的位置，虽然结果可能会失败，但对ＡＰＰ基本不会造成影响。可以借助通过id/name定位目标元素临近的元素的相对关系去定位目标元素。这种方式一般不太会改变，所有能增加测试的鲁棒性。</p>
<p>例如，参考下面的页源码：</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;html&gt;</span>
 <span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"loginForm"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"username"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">type=</span><span class="s">"password"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"continue"</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Login"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"continue"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">value=</span><span class="s">"Clear"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
 <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;html&gt;</span>
</pre></div>
<p>form元素可以通过以下方式定位：</p>
<div class="highlight"><pre><span></span>login_form = driver.find_element_by_xpath("/html/body/form[1]")
login_form = driver.find_element_by_xpath("//form[1]")
login_form = driver.find_element_by_xpath("//form[@id='loginForm']")
</pre></div>
<ul>
<li>1.绝对路径（只对HTML可能造成轻微影响）</li>
<li>2.HTML中第一个form元素</li>
<li>3.通过表单元素的id定位值为”loginForm“的表单元素</li>
</ul>
<p>username元素可以通过以下方式定位：</p>
<div class="highlight"><pre><span></span>username = driver.find_element_by_xpath("//form[input/@name='username']")
username = driver.find_element_by_xpath("//form[@id='loginForm']/input[1]")
username = driver.find_element_by_xpath("//input[@name='username']")
</pre></div>
<ul>
<li>1.通过第一个form元素的input子元素中name属性为"username"的元素定位</li>
<li>2.通过name属性为"loginForm"的form元素的input元素的第一个子元素定位</li>
<li>3.通第一个name属性为”username"的input元素定位</li>
</ul>
<p>“Clear"元素可以通过以下方式定位：</p>
<div class="highlight"><pre><span></span>clear_button = driver.find_element_by_xpath("//input[@name='continue'][@type='button']")
clear_button = driver.find_element_by_xpath("//form[@id='loginForm']/input[4]")
</pre></div>
<ul>
<li>1.通过name属性为”continue"的input元素中name属性为"button"的元素定位。</li>
<li>2.通过id值为'loginForm'的form元素的第４个input子元素定位</li>
</ul>
<p>上面的例子基本覆盖了基本用法，如果想了解更多，可以参考一下链接：</p>
<ul>
<li><a href="http://www.w3schools.com/xsl/xpath_intro.asp">W3Schools Xpath Tutorial</a></li>
<li><a href="https://www.w3.org/TR/xpath/">W3C Xpath Recommendition</a></li>
<li><a href="http://www.zvon.org/comp/r/tut-XPath_1.html">XPath Tutorial</a></li>
</ul>
<p>也有几个非常有用的附加组件，可帮助通过XPath定位元素：
<em> <a href="https://addons.mozilla.org/en-US/firefox/addon/xpath-checker/?id=1095">XPath Checker</a>
</em> <a href="https://addons.mozilla.org/en-US/firefox/addon/firebug/">Firebug</a>
* <a href="https://chrome.google.com/webstore/detail/xpath-helper/hgimnogjllphhhkhlmebbmlgjoejdpjl">XPath Helper</a></p>
<h4 id="tong-guo-lian-jie-wen-ben-ding-wei-chao-lian-jie">通过链接文本定位超链接</h4>
<p>当你知道一个锚点的链接文本，可以通过下面方式定位。这种方式，会返回第一个匹配的位置。如果没有匹配的元素，将会触发NoSuchElementException异常。</p>
<p>参考一下页源码：</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;html&gt;</span>
 <span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;p&gt;</span>Are you sure you want to do this?<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"continue.html"</span><span class="nt">&gt;</span>Continue<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"cancel.html"</span><span class="nt">&gt;</span>Cancel<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;html&gt;</span>
</pre></div>
<p>continue.html的链接可以这样定位：
　
    continue_link = driver.find_element_by_link_text('Continue')
    continue_link = driver.find_element_by_partial_link_text('Conti')</p>
<h4 id="tong-guo-tag-nameding-wei-yuan-su">通过Tag Name定位元素</h4>
<p>当知道tag name的情况下，可以通过tag name去定位元素。同样，这个方式只会返回第一个匹配tagname的元素。如果找不到，同样会触发NoSuchElementException异常。</p>
<p>页源码参考如下：</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;html&gt;</span>
 <span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;h1&gt;</span>Welcome<span class="nt">&lt;/h1&gt;</span>
  <span class="nt">&lt;p&gt;</span>Site content goes here.<span class="nt">&lt;/p&gt;</span>
 <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;html&gt;</span>
</pre></div>
<p>h1元素可以这样定位：</p>
<div class="highlight"><pre><span></span>heading1 = driver.find_element_by_tag_name('h1')
</pre></div>
<h4 id="tong-guo-class-nameding-wei-yuan-su">通过class name定位元素</h4>
<p>下面的方式可以通过class name属性去定位元素。同样会返回第一个匹配的元素。如果找不到元素，就会触发NoSuchElementException异常。</p>
<p>页源码参考如下：</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;html&gt;</span>
 <span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"content"</span><span class="nt">&gt;</span>Site content goes here.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;html&gt;</span>
</pre></div>
<p>元素“p"可以通过下面的方式定位：</p>
<div class="highlight"><pre><span></span>content = driver.find_element_by_class_name('content')
</pre></div>
<h4 id="tong-guo-cssxuan-ze-qi-ding-wei-yuan-su">通过CSS选择器定位元素</h4>
<p>使用下面的方式，可以通过CSS选择器去定位元素。同样，该方式也是返回第一个匹配CSS选择器的元素。如果没有匹配的元素，则触发NoSuchElementException异常。
页面源码参考如下：</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;html&gt;</span>
 <span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"content"</span><span class="nt">&gt;</span>Site content goes here.<span class="nt">&lt;/p&gt;</span>
 <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;html&gt;</span>
</pre></div>
<p>元素”p"可以通过下面的方式定位：</p>
<div class="highlight"><pre><span></span>content = driver.find_element_by_css_selector('p.content')
</pre></div>
<p>Top<a href="">^</a></p>
<p>上一篇<a href="https://king32783784.github.io/lipeng/2015/01/15/selenium/">Selenium主题3</a>
下一篇<a href="https://king32783784.github.io/lipeng/2015/01/17/selenium/">Selenium主题5</a></p>
            </div><!-- /.entry-content -->
            <div class="comments">
              <h3>Comments</h3>
              <div id="disqus_thread"></div>
              <script type="text/javascript">
                var disqus_identifier = "2015/01/16/selenium/";
                (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://xiayfblackwhite.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
              </script>
            </div>
        </div><!-- /.twelve.columns -->
 </div><!-- /.row -->
</section>

       </div><!-- /.row -->
    </div><!-- /.container -->


       <div class="container.nopad bg">


        <footer id="credits" class="row">
          <div class="seven columns left-center">

                   <address id="about" class="vcard body">
                    Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                    which takes great advantage of <a href="http://python.org">Python</a>.
                    <br />
                    Based on the <a target="_blank" href="http://gumbyframework.com">Gumby Framework</a>
                    </address>
          </div>


          <div class="seven columns">
            <div class="row">
              <ul class="socbtns">

                <li><div class="btn primary"><a href="http://github.com/king32783784" target="_blank">Github</a></div></li>






              </ul>
            </div>
          </div>
        </footer>

    </div>


<script type="text/javascript">
    var disqus_shortname = 'xiayfblackwhite';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
  <script src="../../../../theme/js/libs/gumby.min.js"></script>
  <script src="../../../../theme/js/plugins.js"></script>
  <script src="../../../../theme/js/main.js"></script>
  <link rel="stylesheet" type="text/css" href="../../../../theme/emoji/css/basic/emojify.min.css" />
  <script src="../../../../theme/emoji/js/emojify.min.js"></script>
  <script>
    emojify.setConfig({
        img_dir : '../../../../theme/emoji/images/basic'
    });
    emojify.run();
</script>
</body>
</html>